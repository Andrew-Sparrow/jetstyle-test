(this["webpackJsonpjetstyle-test"]=this["webpackJsonpjetstyle-test"]||[]).push([[0],{44:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(16),i=a.n(s),r=(a(44),a(12)),o=a(10),l=a(35),u=a.n(l),d=a(20),b=a(3),j="/",h=["All","Favorites"],p="All",m="/books",f=a(39),O=a(13),g="books/changeGroup",x="books/loadBooks",_="books/isFavorite",v="books/delete",N="places/redirectToRoute",k=Object(r.b)(g,(function(e){return{payload:e}})),y=Object(r.b)(x,(function(e){return{payload:e}})),C=Object(r.b)(_,(function(e,t){return{payload:{id:e,favorite:t}}})),w=Object(r.b)(v,(function(e){return{payload:e}})),P=(Object(r.b)(N,(function(e){return{payload:e}})),a(1));var B=function(e){var t=e.id,a=e.title,c=e.author,n=e.group,s=e.img,i=e.favorite,r=Object(o.b)();return Object(P.jsxs)("li",{className:"contact",id:t,children:[Object(P.jsx)("img",{className:"contact__left",src:null===s?"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png":s,alt:"avatar"}),Object(P.jsxs)("div",{className:"contact__right",children:[Object(P.jsxs)("p",{className:"contact__data",children:["Book Title: ",Object(P.jsx)("span",{className:"contact__name",children:a})]}),Object(P.jsxs)("p",{className:"contact__data",children:["Author: ",Object(P.jsx)("span",{className:"contact__name",children:c})]}),Object(P.jsxs)("p",{className:"contact__data",children:["Group: ",Object(P.jsx)("span",{className:"contact__name",children:n})]})]}),Object(P.jsxs)("div",{className:"contact__buttons",children:[Object(P.jsxs)("button",{className:"contact__bookmark-button button",type:"button",onClick:function(e){r(function(e,t){return function(a,c,n){return n.patch("".concat(m,"/").concat(e),{favorite:t}).then((function(t){a(C(e,t.data.favorite))})).catch((function(e){}))}}(t,!i))},children:[Object(P.jsx)("svg",{className:"contact__bookmark-icon",width:"30",height:"30",style:{stroke:i&&"#4481c3"},children:Object(P.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(P.jsx)("span",{className:"visually-hidden",children:"Add to bookmarks"})]}),Object(P.jsxs)("button",{className:"contact__bookmark-button button",type:"button",children:[Object(P.jsx)("svg",{className:"contact__edit-icon",width:"30",height:"30",children:Object(P.jsx)("use",{xlinkHref:"#icon-pencil"})}),Object(P.jsx)("span",{className:"visually-hidden",children:"Edit"})]}),Object(P.jsxs)("button",{className:"contact__bookmark-button button",type:"button",onClick:function(e){e.preventDefault(),r(function(e){return function(t,a,c){return c.delete("".concat(m,"/").concat(e)).then((function(a){t(w(e))})).catch((function(e){}))}}(t))},children:[Object(P.jsx)("svg",{className:"contact__bookmark-icon",width:"30",height:"30",children:Object(P.jsx)("use",{xlinkHref:"#icon-delete"})}),Object(P.jsx)("span",{className:"visually-hidden",children:"Delete"})]})]})]})},I=a(5),D=a.n(I),L=(D.a.shape({id:D.a.number.isRequired,title:D.a.string.isRequired,author:D.a.string.isRequired,img:D.a.oneOfType([D.a.string,D.a.oneOf([null])]),group:D.a.string}),a(36)),F=a.n(L),S=function(e){var t=e.pageCount,a=e.onPageNumberClick,c=e.forcePage;return Object(P.jsx)(F.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:a,containerClassName:"pagination",activeClassName:"active",forcePage:c})},T="",A=[];var G=function(e){var t=e.items,a=e.initialPageNumber,n=e.activeTabName,s=e.activeBooks,i=t.slice(0,3),r=Math.ceil(t.length/3),o=i,l=Object(c.useReducer)((function(e,t){switch(t.type){case"changePageNumber":return Object(O.a)(Object(O.a)({},e),{},{pageNumber:t.payload});case"changeSlicedItems":return Object(O.a)(Object(O.a)({},e),{},{slicedItems:t.payload});default:throw new Error}}),a,(function(e){return{pageNumber:e,slicedItems:o}})),u=Object(f.a)(l,2),d=u[0],b=u[1];return Object(c.useEffect)((function(){T===n&&A===s||(b({type:"changeSlicedItems",payload:[]}),b({type:"changeSlicedItems",payload:o}),b({type:"changePageNumber",payload:0})),T=n,A=s}),[n,o,s]),Object(P.jsxs)(c.Fragment,{children:[Object(P.jsx)("ul",{className:"cities__places-list places__list tabs__content",children:d.slicedItems.map((function(e){return Object(P.jsx)(B,{id:e.id,title:e.title,author:e.author,group:e.group,img:e.img,favorite:e.favorite},e.id)}))}),t.length>3&&Object(P.jsx)(S,{pageCount:r,onPageNumberClick:function(e){var a=Math.ceil(3*e.selected);o=t.slice(a,a+3),b({type:"changePageNumber",payload:e.selected}),b({type:"changeSlicedItems",payload:o})},forcePage:d.pageNumber})]})};var R=function(e){var t=e.children,a=e.className;return Object(P.jsxs)("div",{className:a,children:[Object(P.jsx)("header",{className:"header",children:Object(P.jsx)("div",{className:"container",children:Object(P.jsx)("div",{className:"header__wrapper",children:Object(P.jsx)("div",{className:"header__left",children:Object(P.jsx)("h2",{className:"header__title",children:"Books"})})})})}),t]})},E=function(e,t){return function(a){return Object(P.jsx)(R,{className:t,children:Object(P.jsx)(e,Object(O.a)({},a))})}};E.displayName="withLayout";var U=E,q=a(19),H=a(11),M=a(25),J=a(37),K=a.n(J),W={getFilteredBooks:function(e,t){return e===p?t:t.filter((function(t){return t.group===e}))},getFavoritesBooks:function(e,t){return e===p?t:t.filter((function(e){return!0===e.favorite}))},formatDate:function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})},generateIdKeys:function(e){return new Array(e).fill("").map((function(){return K()(10)}))},getUpdatedBooks:function(e,t,a){var c=Object(M.a)(t),n=c.findIndex((function(t){return t.id===e}));return c[n].favorite=a,c},deleteItem:function(e,t){var a=Object(M.a)(t),c=a.findIndex((function(t){return t.id===e}));return a.splice(c,1),a}},z=Object(r.c)({books:[],isDataLoaded:!1,activeGroupName:"All"},(function(e){e.addCase(k,(function(e,t){e.activeGroupName=t.payload})).addCase(y,(function(e,t){e.books=t.payload,e.isDataLoaded=!0})).addCase(C,(function(e,t){return e.books=W.getUpdatedBooks(t.payload.id,e.books,t.payload.favorite),e})).addCase(w,(function(e,t){e.books=W.deleteItem(t.payload,e.books)}))})),Q="BOOKS",V=Object(H.b)(Object(q.a)({},Q,z)),X=function(e){return e[Q].books},Y=function(e){return e[Q].isDataLoaded},Z=function(e){return e[Q].activeGroupName};var $=function(e){var t=Object(o.c)(Z),a=Object(o.b)(),c=function(e){e.preventDefault(),a(k(e.currentTarget.dataset.city))};return Object(P.jsx)("div",{className:"tabs",children:Object(P.jsx)("section",{className:"locations container",children:Object(P.jsx)("ul",{className:"locations__list tabs__list",children:h.map((function(e){return Object(P.jsx)("li",{className:"locations__item",children:Object(P.jsx)(d.b,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===t&&"tabs__item--active"),to:"#",onClick:c,children:Object(P.jsx)("span",{children:e})})},e)}))})})})};var ee=function(e){var t=e.activeGroupName;return Object(P.jsx)("div",{className:"cities",children:Object(P.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(P.jsx)("section",{className:"cities__no-places",children:Object(P.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(P.jsx)("b",{className:"cities__status",children:"No books available"}),Object(P.jsxs)("p",{className:"cities__status-description",children:['We could not find any books available at the moment in "',t,'" group']})]})}),Object(P.jsx)("div",{className:"cities__right-section"})]})})};var te=U((function(){var e=Object(o.c)(Z),t=Object(o.c)(X),a=W.getFavoritesBooks(e,t);return Object(P.jsxs)("main",{className:"page__main page__main--index",children:[Object(P.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(P.jsx)($,{}),0===a.length?Object(P.jsx)(ee,{activeGroupName:e}):Object(P.jsx)("div",{className:"cities",children:Object(P.jsx)("div",{className:"cities__places-container container",children:Object(P.jsxs)("section",{className:"cities__places places",children:[Object(P.jsx)("h2",{className:"visually-hidden",children:"Books"}),Object(P.jsxs)("b",{className:"places__found",children:[a.length," books in `",e,"` group"]}),Object(P.jsx)(G,{items:a,initialPageNumber:0,activeTabName:e,activeBooks:a})]})})})]})}));var ae=U((function(){return Object(P.jsxs)("div",{style:{margin:"auto",width:"200px"},children:[Object(P.jsx)("h1",{style:{textAlign:"center"},children:"404"}),Object(P.jsx)("h2",{children:"Page Not Found"})]})}));var ce=function(){return Object(P.jsx)("p",{className:"loading",children:"Loading..."})};var ne=function(){return Object(o.c)(Y)?Object(P.jsx)(d.a,{children:Object(P.jsxs)(b.c,{children:[Object(P.jsx)(b.a,{exact:!0,path:j,children:Object(P.jsx)(te,{className:"page page--gray page--index"})}),Object(P.jsx)(b.a,{children:Object(P.jsx)(ae,{})})]})}):Object(P.jsx)(ce,{})},se=a(4),ie=Object(se.a)(),re=function(e){return function(e){return function(t){return t.type===N&&ie.push(t.payload),e(t)}}},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))},le=function(){var e=u.a.create({baseURL:"https://jetstyle-api.herokuapp.com",timeout:5e3});e.defaults.headers.post["Content-Type"]="application/json";return e.interceptors.response.use((function(e){return e}),(function(){})),e}(),ue=Object(r.a)({reducer:V,middleware:function(e){return e({thunk:{extraArgument:le}}).concat(re)}});ue.dispatch((function(e,t,a){return a.get(m).then((function(t){var a=t.data;e(y(a))})).catch((function(e){}))})),i.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(o.a,{store:ue,children:Object(P.jsx)(ne,{})})}),document.getElementById("root")),oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.79d7a253.chunk.js.map
(this["webpackJsonpjetstyle-test"]=this["webpackJsonpjetstyle-test"]||[]).push([[0],{46:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(16),i=a.n(s),r=(a(46),a(12)),o=a(10),l=a(34),u=a.n(l),d=null!==localStorage.getItem("token")?localStorage.getItem("token"):"",j=a(20),b=a(3),m="/",h=["All","Favorites"],p="All",O="/books",g=a(40),f=a(13),_="books/changeGroup",v="books/loadBooks",x="books/isFavorite",N="places/redirectToRoute",k=Object(r.b)(_,(function(e){return{payload:e}})),y=Object(r.b)(v,(function(e){return{payload:e}})),C=Object(r.b)(x,(function(e,t){return{payload:{id:e,newPlace:t}}})),w=(Object(r.b)(N,(function(e){return{payload:e}})),a(1));var P=function(e){var t=e.id,a=e.title,c=e.author,n=e.group,s=e.img,i=e.favorite,r=Object(o.b)();return Object(w.jsxs)("li",{className:"contact",id:t,children:[Object(w.jsx)("img",{className:"contact__left",src:null===s?"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png":s,alt:"avatar"}),Object(w.jsxs)("div",{className:"contact__right",children:[Object(w.jsxs)("p",{className:"contact__data",children:["Book Title: ",Object(w.jsx)("span",{className:"contact__name",children:a})]}),Object(w.jsxs)("p",{className:"contact__data",children:["Author: ",Object(w.jsx)("span",{className:"contact__name",children:c})]}),Object(w.jsxs)("p",{className:"contact__data",children:["Group: ",Object(w.jsx)("span",{className:"contact__name",children:n})]})]}),Object(w.jsxs)("div",{className:"contact__buttons",children:[Object(w.jsxs)("button",{className:"contact__bookmark-button button",type:"button",onClick:function(e){e.preventDefault(),r(function(e,t){return function(a,c,n){return n.post("".concat(O,"/").concat(e,"/").concat(!!t)).then((function(t){console.log(t),a(C(e,t.data))})).catch((function(e){}))}}(t,!i))},children:[Object(w.jsx)("svg",{className:"contact__bookmark-icon",width:"30",height:"30",style:{stroke:i&&"#4481c3"},children:Object(w.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(w.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]}),Object(w.jsxs)("button",{className:"contact__bookmark-button button",type:"button",children:[Object(w.jsx)("svg",{className:"contact__edit-icon",width:"30",height:"30",children:Object(w.jsx)("use",{xlinkHref:"#icon-pencil"})}),Object(w.jsx)("span",{className:"visually-hidden",children:"To edit"})]}),Object(w.jsxs)("button",{className:"contact__bookmark-button button",type:"button",children:[Object(w.jsx)("svg",{className:"contact__bookmark-icon",width:"30",height:"30",children:Object(w.jsx)("use",{xlinkHref:"#icon-delete"})}),Object(w.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]})]})},I=a(5),T=a.n(I),B=(T.a.shape({id:T.a.number.isRequired,title:T.a.string.isRequired,author:T.a.string.isRequired,img:T.a.oneOfType([T.a.string,T.a.oneOf([null])]),group:T.a.string}),a(35)),F=a.n(B),L=function(e){var t=e.pageCount,a=e.onPageNumberClick,c=e.forcePage;return Object(w.jsx)(F.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:a,containerClassName:"pagination",activeClassName:"active",forcePage:c})},D="";var S=function(e){var t=e.items,a=e.initialPageNumber,n=e.activeTabName,s=t.slice(0,3),i=Math.ceil(t.length/3),r=s,o=Object(c.useReducer)((function(e,t){switch(t.type){case"changePageNumber":return Object(f.a)(Object(f.a)({},e),{},{pageNumber:t.payload});case"changeSlicedItems":return Object(f.a)(Object(f.a)({},e),{},{slicedItems:t.payload});default:throw new Error}}),a,(function(e){return{pageNumber:e,slicedItems:r}})),l=Object(g.a)(o,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){D!==n&&(d({type:"changeSlicedItems",payload:[]}),d({type:"changeSlicedItems",payload:r}),d({type:"changePageNumber",payload:0})),D=n}),[n,r]),Object(w.jsxs)(c.Fragment,{children:[Object(w.jsx)("ul",{className:"cities__places-list places__list tabs__content",children:u.slicedItems.map((function(e){return Object(w.jsx)(P,{id:e.id,title:e.title,author:e.author,group:e.group,img:e.img,favorite:e.favorite},e.id)}))}),t.length>3&&Object(w.jsx)(L,{pageCount:i,onPageNumberClick:function(e){var a=Math.ceil(3*e.selected);r=t.slice(a,a+3),d({type:"changePageNumber",payload:e.selected}),d({type:"changeSlicedItems",payload:r})},forcePage:u.pageNumber})]})};var A=function(e){var t=e.children,a=e.className;return Object(w.jsxs)("div",{className:a,children:[Object(w.jsx)("header",{className:"header",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsx)("div",{className:"header__wrapper",children:Object(w.jsx)("div",{className:"header__left",children:Object(w.jsx)("h2",{className:"header__title",children:"Books"})})})})}),t]})},G=function(e,t){return function(a){return Object(w.jsx)(A,{className:t,children:Object(w.jsx)(e,Object(f.a)({},a))})}};G.displayName="withLayout";var R=G,U=a(19),q=a(11),E=a(41),H=a(36),M=a(37),J=a(38),K=a.n(J),W=function(){function e(){Object(H.a)(this,e)}return Object(M.a)(e,null,[{key:"adaptToClient",value:function(e){var t=Object.assign({},e,{host:Object.assign({},e.host,{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro}),isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image});return delete t.host.avatar_url,delete t.host.is_pro,delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,t}},{key:"adaptPlacesToClient",value:function(e){var t=this;return e.map((function(e){return t.adaptToClient(e)}))}},{key:"getFilteredBooks",value:function(e,t){return e===p?t:t.filter((function(t){return t.group===e}))}},{key:"getFavoritesBooks",value:function(e,t){return e===p?t:t.filter((function(e){return!0===e.favorite}))}},{key:"generateIdKeys",value:function(e){return new Array(e).fill("").map((function(){return K()(10)}))}},{key:"getUpdatedBooks",value:function(e,t,a){var c=Object(E.a)(t),n=c.findIndex((function(t){return t.id===e}));return c[n].favorite=a.favorite,c}}]),e}();W.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})};var z=W,Q=Object(r.c)({books:[],isDataLoaded:!1,activeGroupName:"All"},(function(e){e.addCase(k,(function(e,t){e.activeGroupName=t.payload})).addCase(y,(function(e,t){e.books=t.payload,e.isDataLoaded=!0})).addCase(C,(function(e,t){e.books=z.getUpdatedBooks(t.payload.id,e.books,t.payload)}))})),V="BOOKS",X=Object(q.b)(Object(U.a)({},V,Q)),Y=function(e){return e[V].books},Z=function(e){return e[V].isDataLoaded},$=function(e){return e[V].activeGroupName};var ee=function(e){var t=Object(o.c)($),a=Object(o.b)(),c=function(e){e.preventDefault(),a(k(e.currentTarget.dataset.city))};return Object(w.jsx)("div",{className:"tabs",children:Object(w.jsx)("section",{className:"locations container",children:Object(w.jsx)("ul",{className:"locations__list tabs__list",children:h.map((function(e){return Object(w.jsx)("li",{className:"locations__item",children:Object(w.jsx)(j.b,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===t&&"tabs__item--active"),to:"#",onClick:c,children:Object(w.jsx)("span",{children:e})})},e)}))})})})};var te=function(e){var t=e.activeGroupName;return Object(w.jsx)("div",{className:"cities",children:Object(w.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(w.jsx)("section",{className:"cities__no-places",children:Object(w.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(w.jsx)("b",{className:"cities__status",children:"No books available"}),Object(w.jsxs)("p",{className:"cities__status-description",children:['We could not find any books available at the moment in "',t,'" group']})]})}),Object(w.jsx)("div",{className:"cities__right-section"})]})})};var ae=R((function(){var e=Object(o.c)($),t=Object(o.c)(Y),a=z.getFavoritesBooks(e,t);return Object(w.jsxs)("main",{className:"page__main page__main--index",children:[Object(w.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(w.jsx)(ee,{}),0===a.length?Object(w.jsx)(te,{activeGroupName:e}):Object(w.jsx)("div",{className:"cities",children:Object(w.jsx)("div",{className:"cities__places-container container",children:Object(w.jsxs)("section",{className:"cities__places places",children:[Object(w.jsx)("h2",{className:"visually-hidden",children:"Books"}),Object(w.jsxs)("b",{className:"places__found",children:[a.length," books in `",e,"` group"]}),Object(w.jsx)(S,{items:a,initialPageNumber:0,activeTabName:e})]})})})]})}));var ce=R((function(){return Object(w.jsxs)("div",{style:{margin:"auto",width:"200px"},children:[Object(w.jsx)("h1",{style:{textAlign:"center"},children:"404"}),Object(w.jsx)("h2",{children:"Page Not Found"})]})}));var ne=function(){return Object(w.jsx)("p",{className:"loading",children:"Loading..."})};var se=function(){return Object(o.c)(Z)?Object(w.jsx)(j.a,{children:Object(w.jsxs)(b.c,{children:[Object(w.jsx)(b.a,{exact:!0,path:m,children:Object(w.jsx)(ae,{className:"page page--gray page--index"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(ce,{})})]})}):Object(w.jsx)(ne,{})},ie=a(4),re=Object(ie.a)(),oe=function(e){return function(e){return function(t){return t.type===N&&re.push(t.payload),e(t)}}},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))},ue=function(){var e=u.a.create({baseURL:"https://jetstyle-api.herokuapp.com",timeout:5e3,headers:{"x-token":d}});return e.interceptors.response.use((function(e){return e}),(function(){})),e}(),de=Object(r.a)({reducer:X,middleware:function(e){return e({thunk:{extraArgument:ue}}).concat(oe)}});de.dispatch((function(e,t,a){return a.get(O).then((function(t){var a=t.data;e(y(a))})).catch((function(e){}))})),i.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(o.a,{store:de,children:Object(w.jsx)(se,{})})}),document.getElementById("root")),le()}},[[71,1,2]]]);
//# sourceMappingURL=main.cb380e61.chunk.js.map